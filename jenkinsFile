pipeline {
    agent { docker { image 'maven:3.3.3'}}
    stages {
           stage('Load and Read Properties file') {
                  def props = readProperties file:'./pipeline.properties'
                  def gitURL= props['gitUrl']
                  def branchName=props['branchName']
                  def sonarScan=props['buildSonarScan']
                  def mvnClean=props['mavenClean'] 
                  sh echo "gitURL=${gitURL}"
                  sh echo "branchName=${branchName}"
                  sh echo "sonarScan=${sonarScan}"
                  sh echo "mvnClean=${mvnClean}"        
             }
              stage('Git read') {
                      steps {
                            git url: 'https://github.com/minakshinayak2018/app-repo.git',
              branch: 'master'
                            echo 'Read success'
                         }
              }
             stage('Building Sonar...') {
              steps {
                sh 'mvn sonar:sonar -Dsonar.host.url=http://my61425dns.eastus2.cloudapp.azure.com:9000'
                echo 'Sonar scan success'
                    }
             }
            stage('Build') { 
           steps {
               sh 'mvn clean install'
               echo 'Build success'
                 }  
              }
          }
      }
